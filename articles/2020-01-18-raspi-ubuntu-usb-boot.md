---
layout: post
title: Arm64 Ubuntu Server 18.04.3 для Raspberry PI 3 B+ без использования SD карты.
permalink: /blog/raspi-ubuntu-usb-boot.html
---

**Raspberry PI** замечательное недорогое устройство на основе которого можно строить различные проекты, как ради экспериментов так и для практических нужд. Но большинство "рецептов" в интернете предлагают запускать на “малине” OS Raspbian. Причем чаще всего десктопный. Это специально созданный для **Raspberry PI** 32-х битный дистрибутив Linux на основе Debian. Но для моей цели требовалась 64-х битная система, причем GUI мне так же не нужен, ибо “**малинка**” будет выполнять роль сервера и доступ для управления ею мне нужен через **ssh**. Благо добрые люди подготовили **arm64** дистрибутив **Ubuntu Server** специально для **Raspberry PI 3**. И всё бы хорошо, но предполагается, что вы будете “гонять” его на SD карте. А SD-шки медленные, ненадежные, сильно греются в процессе эксплуатации, а также имеют сравнительно малый объем (мне нужно много места). А еще они часто “умирают”, особенно если “**малинка**” выключается не штатно (например пропало электричество).

И вот я пришел к простому рецепту.

## Задача

Как закатать образ **Arm64 Ubuntu Server 18.04.3** на USB диск, например, SSD или HDD в “кармане” и заставить это всё работать на **Raspberry PI 3 B+** без использования micro SD card.

<!--more-->

## Дано

- Raspberry PI 3 B+
- USB носитель
- [ubuntu-18.04.3-preinstalled-server-arm64+raspi3.img.xz](http://cdimage.ubuntu.com/releases/18.04.3/release/)
- [Balena Etcher](https://www.balena.io/etcher/) для записи образа на диск
- ~~Терпение~~

## Решение

Скачиваем образ системы. Затем записываем его на USB носитель с помощью Balena Etcher. _Для того чтобы записать на SSD или HDD потребуется в настройках Balena Etcher поставить галку на против Unsafe Mode, иначе в списке доступных для записи устройств вы свой диск не увидите_.

После того как образ был записан, диск автоматически будет отмонтирован. Нужно примонтировать его снова и **отредактировать два файла**.

### config.txt

вместо

```txt
kernel=kernel8.bin
```

пишем

```txt
kernel=vmlinuz
initramfs initrd.img followkernel
```

### cmdline.txt

вместо

```txt
root=/dev/mmcblk0p2
```

пишем

```txt
root=LABEL=writable
```

### Подключаем диск к “малине”, ждем пару минут, profit

[Источник - raspberrypi.org форум](https://www.raspberrypi.org/forums/viewtopic.php?t=233794)
